---
layout: post
title: "搞一个简单的物联网规则引擎"
date: 2017-02-06 21:44:12 +0800
image: 'blog-author.jpg'
description: 做一个 Ruff 物联网项目的手机 APP 和告警触发器规则引擎
main-class: 'backend'
color: '#CDDC39'
tags:
- reasoning
categories: Journal
twitter_text:
introduction: 物联网告警触发器规则引擎的几种写法
---
# 触触触触触发器！

## 背景

现有一个新的有趣项目是做工业 SaaS，其中大量智能化的工业设施上报的数据会流过一个规则引擎。
![工业 SaaS](https://raw.githubusercontent.com/linonetwo/linonetwo.github.io/master/assets/img/posts/ruleengine/rule.png)
感觉计算速度不够的话就会像狂按有声计算器时发出的声音：「归归归归归零…」。工业现场一个皮带掉链子或者电流超阈值不在 5 秒内通知到人用户就不会有理由选用我们的产品，而且据产品经理开玩笑说用户比起看监控，更多的精力会花在打麻将上，我更感到责任重大，为工人同志节省心力，让他们有更多的时间玩麻将，这不是和 GraphQL 做的事情很类似么？他们为前端节省心力，让前端有更多的时间玩 Steam。

## DSL 方案

曾见过前辈用 Elixir 的模式匹配来处理大量的规则[[1]](#1)，结合以前看鲍捷对推理的吐槽[[2]](#2)稍微能理解一点其中的辛苦，但当时看着更多是不明觉厉。主动跟 SE 申请负责这个部分后，简单入门了一下 Elixir，写了一个 demo 如下：

## 参考文献

### [<span id="1">Policy Engine 的前世今生 - 陈天</span>](https://zhuanlan.zhihu.com/p/24749368)

### [<span id="2">精益知识图谱方法论</span>](http://blog.memect.cn/wp-content/uploads/2016/09/2016-09-19_ccks.pdf)
